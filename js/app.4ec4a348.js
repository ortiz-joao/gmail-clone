(function(e){function t(t){for(var c,a,l=t[0],o=t[1],u=t[2],s=0,b=[];s<l.length;s++)a=l[s],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&b.push(r[a][0]),r[a]=0;for(c in o)Object.prototype.hasOwnProperty.call(o,c)&&(e[c]=o[c]);d&&d(t);while(b.length)b.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],c=!0,l=1;l<n.length;l++){var o=n[l];0!==r[o]&&(c=!1)}c&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var c={},r={app:0},i=[];function a(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=c,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)a.d(n,c,function(t){return e[t]}.bind(null,c));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/gmail-clone/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var d=o;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("830f"),r=n("5c40"),i=Object(r["m"])("h1",null,"VMail Inbox",-1),a=Object(r["l"])(" Loading... ");function l(e,t){var n=Object(r["u"])("MailTable");return Object(r["r"])(),Object(r["h"])(r["c"],null,[i,Object(r["m"])(r["d"],null,{fallback:Object(r["A"])((function(){return[a]})),default:Object(r["A"])((function(){return[Object(r["m"])(n)]})),_:1})],64)}var o={class:"mail-table"},u={class:"date"};function d(e,t){var n=Object(r["u"])("BulkActionBar"),c=Object(r["u"])("MailView"),i=Object(r["u"])("ModalView");return Object(r["r"])(),Object(r["h"])(r["c"],null,[Object(r["m"])("button",{onClick:t[1]||(t[1]=function(t){return e.selectScreen("inbox")}),disabled:"inbox"===e.selectedScreen},"Inbox",8,["disabled"]),Object(r["m"])("button",{onClick:t[2]||(t[2]=function(t){return e.selectScreen("archive")}),disabled:"archive"===e.selectedScreen},"Archived",8,["disabled"]),Object(r["m"])(n,{emails:e.filteredEmails},null,8,["emails"]),Object(r["m"])("table",o,[Object(r["m"])("tbody",null,[(Object(r["r"])(!0),Object(r["h"])(r["c"],null,Object(r["s"])(e.filteredEmails,(function(t){return Object(r["r"])(),Object(r["h"])("tr",{key:t.id,class:["clickable",t.read?"read":""]},[Object(r["m"])("td",null,[Object(r["m"])("input",{onClick:function(n){return e.emailSelection.toggle(t)},checked:e.emailSelection.emails.has(t),type:"checkbox"},null,8,["onClick","checked"])]),Object(r["m"])("td",{onClick:function(n){return e.openEmail(t)}},Object(r["x"])(t.from),9,["onClick"]),Object(r["m"])("td",{onClick:function(n){return e.openEmail(t)}},[Object(r["m"])("p",null,[Object(r["m"])("strong",null,Object(r["x"])(t.subject),1),Object(r["l"])(" - "+Object(r["x"])(t.body),1)])],8,["onClick"]),Object(r["m"])("td",{onClick:function(n){return e.openEmail(t)}},[Object(r["m"])("p",u,Object(r["x"])(e.format(new Date(t.sentAt),"MM/dd/yyyy")),1)],8,["onClick"]),Object(r["m"])("td",{onClick:function(n){return e.openEmail(t)}},[Object(r["m"])("button",{onClick:function(n){return e.archiveEmail(t)}},"Archive",8,["onClick"])],8,["onClick"])],2)})),128))])]),e.openedEmail?Object(r["m"])(i,{key:0,onCloseModal:t[4]||(t[4]=function(t){return e.openedEmail=null})},{default:Object(r["A"])((function(){return[Object(r["m"])(c,{email:e.openedEmail,onChangeEmail:t[3]||(t[3]=function(t){return e.changeEmail(t)})},null,8,["email"])]})),_:1}):Object(r["i"])("",!0)],64)}n("4de4"),n("c975"),n("96cf");var s=n("1da1"),b=n("b166"),m=n("bc3a"),f=n.n(m),j=n("a1e9"),O={class:"email-display"},h={class:"mb-0"},p=Object(r["l"])("Subject: ");function v(e,t){return Object(r["r"])(),Object(r["h"])("div",O,[Object(r["m"])("div",null,[Object(r["m"])("button",{onClick:t[1]||(t[1]=function(t){return e.toggleArchive(t)})},Object(r["x"])(e.email.archived?"Move to Inbox (e)":"Archive (e)"),1),Object(r["m"])("button",{onClick:t[2]||(t[2]=function(t){return e.toggleRead(t)})},Object(r["x"])(e.email.read?"Mark Unread (r)":"Mark Read (r)"),1),Object(r["m"])("button",{onClick:t[3]||(t[3]=function(t){return e.goOlder(t)})},"Older (j)"),Object(r["m"])("button",{onClick:t[4]||(t[4]=function(t){return e.goNewer(t)})},"Newer (k)")]),Object(r["m"])("h2",h,[p,Object(r["m"])("strong",null,Object(r["x"])(e.email.subject),1)]),Object(r["m"])("div",null,[Object(r["m"])("em",null,"From "+Object(r["x"])(e.email.from)+" on "+Object(r["x"])(e.format(new Date(e.email.sentAt),"MMM do yyyy")),1)]),Object(r["m"])("div",{innerHTML:e.marked(e.email.body)},null,8,["innerHTML"])])}var g=n("e0c1"),k=n.n(g),y=(n("7db0"),function(e){var t=function(t){var n=e.find((function(e){return e.key===t.key}));n&&n.fn()};window.addEventListener("keydown",t),Object(r["p"])((function(){window.removeEventListener("keydown",t)}))}),E=y,x={setup:function(e,t){var n=t.emit,c=function(){n("changeEmail",{toggleRead:!0,save:!0})},r=function(){n("changeEmail",{toggleArchive:!0,save:!0,closeModal:!0})},i=function(){n("changeEmail",{changeIndex:-1})},a=function(){n("changeEmail",{changeIndex:1})},l=function(){n("changeEmail",{changeIndex:1,toggleArchive:!0,save:!0})},o=function(){n("changeEmail",{changeIndex:-1,toggleArchive:!0,save:!0})};return E([{key:"r",fn:c},{key:"e",fn:r},{key:"k",fn:a},{key:"j",fn:i},{key:"[",fn:l},{key:"]",fn:o}]),{format:b["a"],marked:k.a,toggleRead:c,goOlder:i,goNewer:a,goNewerAndArchive:l,goOlderAndArchive:o}},props:{email:{type:Object,required:!0}}};x.render=v;var S=x,w={class:"modal"},M={class:"modal-card"};function C(e,t){return Object(r["r"])(),Object(r["h"])("div",w,[Object(r["m"])("div",{class:"overlay",onClick:t[1]||(t[1]=function(t){return e.emit("closeModal")})}),Object(r["m"])("div",M,[Object(r["t"])(e.$slots,"default")])])}var A={setup:function(e,t){var n=t.emit;return E([{key:"Escape",fn:function(){return n("closeModal")}}]),{emit:n}}};A.render=C;var R=A,I=(n("4160"),n("d3b7"),n("6062"),n("3ca3"),n("159b"),n("ddb0"),Object(j["g"])(new Set)),_=function(){var e=function(e){I.has(e)?I.delete(e):I.add(e)},t=function(){I.clear()},n=function(e){e.forEach((function(e){I.add(e)}))},c=function(e){I.forEach((function(t){e(t),f.a.put("https://my-json-server.typicode.com/ortiz-joao/gmail-clone/emails/".concat(t.id),t)}))},r=function(){return c((function(e){return e.read=!0}))},i=function(){return c((function(e){return e.read=!1}))},a=function(){c((function(e){return e.archived=!0})),t()};return{emails:I,toggle:e,clear:t,addMultiple:n,markRead:r,markUnread:i,archive:a}},P=_,T=(n("a623"),n("2909")),L={class:"bulk-action-bar"},V={class:"checkbox"},z={class:"buttons"};function B(e,t){return Object(r["r"])(),Object(r["h"])("div",L,[Object(r["m"])("span",V,[Object(r["m"])("input",{type:"checkbox",checked:e.allEmailsSelected,class:[e.someEmailSelected?"partial-check":""],onClick:t[1]||(t[1]=function(t){return e.bulkSelect(t)})},null,10,["checked"])]),Object(r["m"])("span",z,[Object(r["m"])("button",{onClick:t[2]||(t[2]=function(t){return e.emailSelection.markRead()}),disabled:Object(T["a"])(e.emailSelection.emails).every((function(e){return e.read}))},"Mark Read",8,["disabled"]),Object(r["m"])("button",{onClick:t[3]||(t[3]=function(t){return e.emailSelection.markUnread()}),disabled:Object(T["a"])(e.emailSelection.emails).every((function(e){return!e.read}))},"Mark Unread",8,["disabled"]),Object(r["m"])("button",{onClick:t[4]||(t[4]=function(t){return e.emailSelection.archive()}),disabled:0===e.numberSelected},"Archive",8,["disabled"])])])}var N={setup:function(e){var t=P(),n=Object(r["g"])((function(){return t.emails.size})),c=Object(r["g"])((function(){return e.emails.length})),i=Object(r["g"])((function(){return n.value===c.value})),a=Object(r["g"])((function(){return n.value>0&&n.value<c.value})),l=function(){i.value?t.clear():t.addMultiple(e.emails)};return{allEmailsSelected:i,someEmailSelected:a,bulkSelect:l,emailSelection:t,numberSelected:n}},props:{emails:{type:Array,required:!0}}};N.render=B;var U=N,q={components:{MailView:S,ModalView:R,BulkActionBar:U},setup:function(){return Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("https://my-json-server.typicode.com/ortiz-joao/gmail-clone/emails");case 2:return t=e.sent,n=t.data,e.abrupt("return",{emailSelection:P(),format:b["a"],emails:Object(j["h"])(n),openedEmail:Object(j["h"])(null),selectedScreen:Object(j["h"])("inbox")});case 5:case"end":return e.stop()}}),e)})))()},computed:{sortedEmails:function(){return this.emails.sort((function(e,t){return e.sentAt<t.sentAt?1:-1}))},filteredEmails:function(){return"inbox"===this.selectedScreen?this.emails.filter((function(e){return!e.archived})):this.emails.filter((function(e){return e.archived}))}},methods:{selectScreen:function(e){this.selectedScreen=e,this.emailSelection.clear()},openEmail:function(e){this.openedEmail=e,e&&(e.read=!0,this.updateEmail(e))},archiveEmail:function(e){e.archived=!0,this.updateEmail(e)},changeEmail:function(e){var t=e.toggleRead,n=e.toggleArchive,c=e.save,r=e.closeModal,i=e.changeIndex,a=this.openedEmail;if(t&&(a.read=!a.read),n&&(a.archived=!a.archived),c&&this.updateEmail(a),r&&(this.openedEmail=null),i){var l=this.unarchivedEmails,o=l.indexOf(a),u=l[o+i];this.openEmail(u)}},updateEmail:function(e){f.a.put("https://my-json-server.typicode.com/ortiz-joao/gmail-clone/emails/".concat(e.id),e)}}};q.render=d;var D=q,H={name:"App",components:{MailTable:D}};n("64be");H.render=l;var J=H;Object(c["a"])(J).mount("#app")},"64be":function(e,t,n){"use strict";n("98e6")},"98e6":function(e,t,n){}});
//# sourceMappingURL=app.4ec4a348.js.map